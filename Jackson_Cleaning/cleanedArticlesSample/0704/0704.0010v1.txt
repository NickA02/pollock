 A hypercube HX on a setXis a graph which vertices are the nite subsets ofX two vertices are joined by an edge if they dier by a singleto n. A partial cube is a graph that can be isometrically embedded into a hype rcube. There are three general graphtheoretical structures that play a prominent role in the theory of partial cubes namely semicubes Djok ovi cs relation and Winklers relation . We use these structures in particula r to characterize bi partite graphs and partial cubes. The characterization pro blem for partial cubes was considered as an important one and many characterizatio ns are known. We list contributions in the chronological order Djokovi c Avis Winkler Roth and Winkler C hepoi and . In the paper we present new proofs for the results of Djokovi c Winkler and Chepoi and obtain two more characteri zations of partial cubes. The paper is also concerned with some ways of constructing ne w partial cubes from old ones. Properties of subcubes the Cartesian p roduct of partial cubes and expansion and contraction of a partial cube are in vestigated. We introduce a construction based on pasting two graphs togeth er and show how new partial cubes can be obtained from old ones by pasting the m together. The paper is organized as follows. Hypercubes and partial cubes are introduced in Section tog ether with two basic examples of innite partial cubes. Vertex sets of p artial cubes are described in terms of well graded families of nite sets. In Section we introduce the concepts of a semicube Djokovi csand Win klers relations and establish some of their properties. Bipartite graphs and partial cubes are characterized by means of these structure s. One more charac terization of partial cubes is obtained in Section where s ocalled fundamental sets in a graph are introduced. The rest of the paper is devoted to constructions subcubes a nd the Carte sian product Section pasting Section and expansio ns and contractions Section . We show that these constructions produce new pa rtial cubes from old ones. Isometric and lattice dimensions of new partial cu bes are calculated. These dimensions are introduced in Section . Few words about conventions used in the paper are in order. Th esum disjoint union ABof two sets AandBis the union A B. All graphs in the paper are simple undirected graphs. In the n otationG VE the symbol Vstands for the set of vertices of the graph GandEstands for its set of edges. By abuse of language we often write abfor an edge in a graph if this is the case abis an unordered pair of distinct vertices. We denote abracktltUabracktrihtthe graph induced by the set of vertices UV. IfGis a connected graph thendGab stands for the distance between two vertices aandbof the graph G. Wherever it is clear from the context which graph is under co nsideration we drop the subscript GindGab. A subgraph HGis anisometric subgraph ifdHab dGab for all vertices aandbofH it is convex if any shortest path inGbetween vertices of Hbelongs toH. Hypercubes and partial cubes LetXbe a set. We denote PfX the set of all nite subsets of X. Denition .. A graph HX has the set PfX as the set of its vertices a pair of vertices PQis an edge of HX if the symmetric dierence PQis a singleton. The graph HX is called the hypercube on X. IfXis a nite set of cardinality n then the graph HX is thencubeQn. The dimension of the hypercube HX is the cardinality of the set X. The shortest path distance dPQ on the hypercube HX is the Hamming distance between sets PandQ dPQ PQforPQPf. . The set PfX is a metric space with the metric d. Denition .. A graphGis apartial cube if it can be isometrically embedded into a hypercube HX for some set X. We often identify Gwith its isometric image in the hypercube HX and say that Gis apartial cube on the set X. Figure . A graph and its isometric embedding into Q. An example of a partial cube and its isometric embedding into the cubeQ is shown in Figure .. Clearly a family Fof nite subsets of Xinduces a partial cube on Xif and only if for any two distinct subsets PQFthere is a sequence RPR...R nQ of sets in Fsuch that dRiRi for all in anddPQ n. . The families of sets satisfying condition . are known as well graded fam ilies of sets . Note that a sequence Ri satisfying . is a shortest path fromPtoQinHX and in the subgraph induced by F. Denition .. A family Fof arbitrary subsets of Xis awgfamily well graded family of sets if for any two distinct subsets PQF the setPQis nite and there is a sequence RPR...R nQ of sets in Fsuch that RiRi for all in andPQn. Example .. The induced graph can be a partial cube on a dierent set if the family Fis not well graded. Consider for instance the family Faababcbc of subsets of Xabc. The graph induced by this family is a path of length in the cube Qcf. Figure .. Clearly Fis not well graded. On the other hand as it can be easily seen any path is a partial cube. Figure . A nonisometric path in the cube Q. Any family Fof subsets of Xdenes a graph GF FEF where EFPQ FPQ . Theorem .. The graph GFdened by a family Fof subsets of a set Xis isomorphic to a partial cube on Xif and only if the family Fis well graded. Proof. We need to prove suciency only. Let Sbe a xed set in F. We dene a mapping fFPfX byfR RSforRF. Then dfRfT RSTSRT. Thusfis an isometric embedding of FintoPfX. Let Ri be a sequence of sets in Fsuch thatRPRnQPQn and RiRi for all i n . Then the sequence fRi satises conditions .. The result follows. A setRPfX is said to be lattice between setsPQPfX if PQRPQ. It ismetrically between PandQif dPR dRQ dPQ. The following theorem is a wellknown result about these two betweenness re lations on PfX see for instance . Theorem .. Lattice and metric betweenness relations coincide on PfX. LetFbe a family of nite subsets of X. The set of all RFthat are betweenPQFis the interval IPQbetweenPandQinF. Thus IPQ FPQPQ where PQPQ is the usual interval in the lattice Pf. Two distinct sets PQFareadjacent in FifJPQ PQ. If setsP andQform an edge in the graph induced by F thenPandQare adjacent in F but generally speaking not vice versa. For instance in E xample . the vertices andbcare adjacent in Fbut do not dene an edge in the induced graph cf. Figure .. The following theorem is a local characterization of wgf amilies of sets. Theorem .. A family FPfXis well graded if and only if dPQ for any two sets PandQthat are adjacent in F. Proof. Necessity. Let Fbe a wgfamily of sets. Suppose that PandQare adjacent in F. There is a sequence RPR...R nQthat satises conditions .. Since the sequence Ri is a shortest path in F we have dPPi dPiQ dPQ for all in. ThusPiIPQ PQ. It follows that dPQ n . Suciency. Let PandQbe two distinct sets in F. We prove by induction onndPQ that there is a sequence RiFsatisfying conditions .. The statement is trivial for n . Suppose that n and that the statement is true for all k n . LetPandQbe two sets in Fsuch that dPQ n. SincedPQ the sets PandQare not adjacent in F. Therefore there exists RFthat lies between PandQand is distinct from these two sets. Then dPR dRQ dPQ and both distances dPR anddRQ are less than n. By the induction hypothesis there is a sequence RiFsuch that PR RRj QRnfor some j n satisfying conditions . for i j andji n. It follows that Fis a wgfamily of sets. We conclude this section with two examples of innite partia l cubes more examples are found in . Example .. LetZbe the graph on the set Zof integers with edges dened by pairs of consecutive integers. This graph is a partial cub e since its vertex set is isometric to the wgfamily of intervals m mZinZ. Example .. Let us consider Znas a metric space with respect to the metric. The graph ZnhasZnas the vertex set two vertices in Znare connected if they are on the unit distance from each other. We will show i n Section Corollary . that Znis a partial cube. Characterizations Only connected graphs are considered in this section. Denition .. LetG VE be a graph and dbe its distance function. For any two adjacent vertices abVletWabbe the set of vertices that are closer toathan tob WabwVdwadwb. Following we call the sets Waband induced subgraphs abracktltWababracktrihtsemicubes of the graphG. The semicubes WabandWbaare called opposite semicubes . Remark .. The subscript abinWabstands for an ordered pair of vertices not for an edge of G. In his original paper Djokovi c uses notation Gab cf. . We use the notation from . Clearly two opposite semicubes are disjoint. They can be us ed to charac terize bipartite graphs as follows. Theorem .. A graphG VEis bipartite if and only if the semicubes Wab andWbaform a partition of Vfor any edge abE. Proof. Let us recall that a connected graph Gis bipartite if and only if for every vertexxthere is no edge abwithdxa dxb see for instance . For any edgeabEand vertex xVwe clearly have dxa dxbx WabWba. The result follows. The following lemma is instrumental and will be used frequen tly in the rest of the paper. Lemma .. LetG VEbe a graph and wWabfor some edge abE. Then dwb dwa . Accordingly WabwVdwb dwa . Proof. By the triangle inequality we have dwadwbdwa dab dwa . The result follows since dtakes values in N. There are two binary relations on the set of edges of a graph th at play a central role in characterizing partial cubes. Denition .. LetG VE be a graph and exyandfuvbe two edges ofG. i Djokovi c The relation onEis dened by effjoins a vertex in Wxywith a vertex in Wyx. The notation can be chosen such that uWxyandvWyx. ii Winkler The relation on Eis dened by efdxu dyvatioslashdxv dyu. It is clear that both relations and are reexive and is symmetric. Lemma .. The relation is a symmetric relation on E. Proof. Suppose that xyuv withuWxyandvWyx. By Lemma . and the triangle inequality we have dux duyduv dvy dvy dvxdvu dux dux. Hencedux dvx anddvy duy. Therefore xWuvand yWvu. It follows that uvxy . Lemma .. . Proof. Suppose that xyuv withuWxy vWyx. By Lemma . dxu dyv dxv dyuatioslashdxv dyu. Hencexyuv. Example .. It is easy to verify that is the identity relation on the set of edges of the cycle C. On the other hand any two edges of Cstand in the relation . Thus atioslash in this case. Bipartite graphs can be characterized in terms of relations and as follows. Theorem .. A graphG VEis bipartite if and only if . Proof. Necessity. Suppose that Gis a bipartite graph two edges xyanduv stand in the relation that is dxu dyvatioslashdxv dyu and that edges xyanduvdo not stand in the relation . By Theorem . we may assume that uvWxy. By Lemma . we have dxu dyv dyu dxv dxv dyu a contradiction. It follows that . By Lemma . . Suciency. Suppose that Gis not bipartite. By Theorem . there is an edgexysuch thatWxyWyxis a proper subset of V. SinceGis connected there is an edge uvwithu WxyWyxandvWxyWyx. Clearlyuvdoes not stand in the relation toxy. On the other hand dxu dyvatioslashdxv dyu sinceu WxyWyxandvWxyWyx. Thusxyuv a contradiction since we assumed that . By Theorem . the relations and coincide on bipartite graphs. For this reason we use the relation in the rest of the paper. Lemma .. LetG VEbe a bipartite graph such that all its semicubes are convex sets. Then two edges xyanduvstand in the relation if and only if the corresponding pairs of mutually opposite semicubes form eq ual partitions of V xyuv WxyWyxWuvWvu. Proof. Necessity We assume that the notation is chosen such that uWxy andvWyx. LetzWxyWvu. By Lemma . dzu dzv dvu. SincezuWxyandWxyis convex we have vWxy a contradiction to the assumption that vWyx. ThusWxyWvu. Since two opposite semicubes in a bipartite graph form a partition of V we haveWuvWxyandWvuWyx. A similar argument shows that WuvWyxandWvuWxy ifuWyx andvWxy. Suciency. Follows from the denition of the relation . We need another general property of the relation cf. Lemma . in . Lemma .. LetPbe a shortest path in a graph G. Then no two distinct edges ofPstand in the relation . Proof. Letijandxixiandxjxjbe two edges in a shortest path Pfrom xtoxn. Then dxixjdxixj anddxixjdxixj soxixiWxjxj. It follows that edges xixiandxjxjdo not stand in the relation . The converse statement is true for bipartite graphs we omit the proof a counterexample is the cycle Cwhich is not bipartite. Lemma .. LetG VEbe a bipartite graph. The following statements are equivalent iAll semicubes of Gare convex. iiThe relation is an equivalence relation on E. Proof. iii. Follows from Lemma .. iii. Suppose that is transitive and there is a nonconvex semicube Wab. Then there are two vertices uvWaband a shortest path Pfromuto vthat intersects Wba. This path contains two distinct edges eandfjoining vertices of semicubes WabandWba. The edges eandfstand in the relation to the edge ab. By transitivity of we haveef. This contradicts the result of Lemma .. Thus all semicubes of Gare convex. We now establish some basic properties of partial cubes. Theorem .. LetG VEbe a partial cube. Then iGis a bipartite graph. iiEach pair of opposite semicubes form a partition of V. iiiAll semicubes are convex subsets of V. ivis an equivalence relation on E. Proof. We may assume that Gis an isometric subgraph of some hypercube HX that isG FEF for a wgfamily Fof nite subsets of X. i It suces to note that if two sets in HX are connected by an edge then they have dierent parity. Thus HX is a bipartite graph and so is G. ii Follows from i and Theorem .. iii LetWABbe a semicube of G. By Lemma . and Theorem . we have WABSFSBASB. LetQRWABandPbe a vertex of Gsuch that dQP dPR dQR. By Theorem . QRPQR. SinceQRWAB we have QBAQBandRBARB which implies PBQRBAQRBSB. HencePWAB and the result follows. iv Follows from iii and Lemma .. Remark .. Since semicubes of a partial cube G VE are convex subsets of the metric space V they are halfspaces inV. This terminology is used in . The following theorem presents four characterizations of p artial cubes. The rst two are due to Djokovi c and Winkler cf. Theore m . in . Theorem .. LetG VEbe a connected graph. The following statements are equivalent iGis a partial cube. iiGis bipartite and all semicubes of Gare convex. iiiGis bipartite and is an equivalence relation. ivGis bipartite and for all xyuv E xyuv WxyWyxWuvWvu. . vGis bipartite and for any pair of adjacent vertices of G there is a unique pair of opposite semicubes separating these two vertices. Proof. By Lemma . the statements ii and iii are equivalent an d by The orem . i implies both ii and iii. iiii. By Theorem . each pair WabWbaof opposite semicubes of Gform a partition of V. We orient these partitions by calling in an arbitrary way one of the two opposite semicubes in each partition a positive semicube . Let us assign to each xVthe setWx of all positive semicubes containing x. In the next paragraph we prove that the family FWxxVis well graded and that the assignment xmapstoWx is an isometry between VandF. Letxandybe two distinct vertices of G. We say that a positive semicube Wabseparatesxandyif eitherxWab yWbaorxWba yWab. It is clear thatWabseparatesxandYif and only if WabWxWy. LetP be a shortest path xxx...x nyfromxtoy. By Lemma . no two distinct edges of Pstand in the relation . By Lemma . distinct edges of P dene distinct positive semicubes clearly these semicub es separate xandy. Let Wabbe a positive semicube separating xandy and sayxWabandyWba. There is an edge fPthat joins vertices in WabandWba. Hencefstands in the relation toaband by Lemma . Wabis dened by f. It follows that any semicube in WxWy is dened by a unique edge in Pand any edge in P denes a semicube in WxWy. Therefore dWxWy dxy that isxmapstoWx is an isometry. Clearly Fis a wgfamily of sets. By Theorem . the family Fis isometric to a wgfamily of nite sets. HenceGis a partial cube. ivii. Suppose that there exist an edge absuch that semicube Wbais not convex. Let pandqbe two vertices in Wbasuch that there is a shortest pathPfromptoqthat intersects Wab. There are two distinct edges xyanduv inPsuch thatxuWabandyvWba. Sinceabxy andabuv we have by . WabWxyWuv. HenceuWxyandvWyx. By Lemma . dxu dxv dvy dvy a contradiction since Pis a shortest path from ptoq. iiiv. Follows from Lemma .. It is clear that iv and v are equivalent. Fundamental sets in partial cubes Semicubes played an important role in the previous section. In this section we introduce three more classes of useful subsets of graphs. We also establish one more characterization of partial cubes. LetG VE be a connected graph. For a given edge eabE we dene the following sets cf. FabfEefuvEuWabvWba UabwWabwis adjacent to a vertex in Wba UbawWbawis adjacent to a vertex in Wab. The ve sets are schematically shown in Figure .. Figure . Fundamental sets in a partial cube. Remark .. In the case of a partial cube G VE the semicubes Waband Wbaare complementary halfspaces in the metric space Vcf. Remark .. Then the set Fabcan be regarded as a hyperplane separating these halfspa ces see where this analogy is formalized in the context of h yperplane arrange ments. The following theorem generalizes the result obtained in for median graphs see also . Theorem .. Letabbe an edge of a connected bipartite graph G. If the semicubesWabandWbaare convex then the set Fabis a matching and induces an isomorphism between the graphs abracktltUababracktrihtandabracktltUbaabracktriht. Proof. Suppose that Fabis not a matching. Then there are distinct edges xu andxvwith sayxUabanduvUba. By the triangle inequality duv. SinceGdoes not have triangles duvatioslash . Hence duv which implies thatxlies between uandv. This contradicts convexity of Wba sincexWab. ThereforeFabis a matching. To show that Fabinduces an isomorphism let xyuv FabandxuE wherexuUabandyvUba. SinceGdoes not have odd cycles dvyatioslash . By the triangle inequality dvydvu dux dxy . SinceWbais convexdvyatioslash . Thus dvy that is vyis an edge. The result follows by symmetry. By Theorem .ii we have the following corollary. Corollary .. LetG VEbe a partial cube. For any edge abthe setFab is a matching and induces an isomorphism between induced gra phsabracktltUababracktrihtand abracktltUbaabracktriht. Figure . Graph G. Example .. LetGbe the graph depicted in Figure .. The set Fababxuyv is a matching and denes an isomorphism between the graphs in duced by subsets Uabaxy andUbabuv . The setWbais not convex so Gis not a partial cube. Thus the converse of Corollary . does not hol d. We now establish another characterization of partial cubes that utilizes a geometric property of families Fab. Theorem .. For a connected graph Gthe following statements are equivalent iGis a partial cube. iiGis bipartite and dxu dyvanddxv dyu . for anyabEandxyuv Fab. Proof. iii. We may assume that xuWabandyvWba. Sinceis an equivalence relation we have xyuvab . By Lemma . WuvWxyWab. By Lemma . dxu dxv dvy dyv. We also have dxv dyv dyu by the same lemma. iii. Suppose that Gis not a partial cube. Then by Theorem . there exist an edge absuch that say semicube Wbais not convex. Let pandqbe two vertices inWbasuch that there is a shortest path Pfromptoqthat intersects Wab. Letuvbe the rst edge in Pwhich belongs to Fabandxybe the last edge inPwith the same property see Figure .. Figure . An illustration to the proof of theorem .. SincePis a shortest path we have dvy dvu dux dxyatioslashdxu which contradicts condition .. Thus all semicubes of Gare convex. By Theorem . Gis a partial cube. Remark .. One can say that four vertices satisfying conditions . d ene arectangle inG. Then Theorem . states that a connected graph is a partial cube if and only if it is bipartite and for any edge abpairs of edges in Fabdene rectangles in G. Dimensions of partial cubes There are many dierent ways in which a given partial cube can be isometrically embedded into a hypercube. For instance the graph Kcan be isometrically embedded in dierent ways into any hypercube HX with X. Following Djokovi c see also we dene the isometric dimension dimIG of a partial cube Gas the minimum possible dimension of a hypercube HX in whichGis isometrically embeddable. Recall see Section that th e dimension of HX is the cardinality of the set X. Theorem .. Theorem in . LetG VEbe a partial cube. Then dimIG E . whereis Djokovi cs equivalence relation on EandEis the set of its equiv alence classes the quotientset . The quotientset Ecan be identied with the family of all distinct sets Fab see Section . If Gis a nite partial cube we may consider it as an isometric subgraph of some hypercube Qn. Then the edges in each family Fabare parallel edges inQncf. Theorem .. This observation essentially proves . in the nite case. LetGbe a partial cube on a set X. The vertex set of Gis a wgfamily Fof nite subsets of Xsee Section . We dene the retraction ofFas a family F of subsets of XF Fconsisting of the intersections of sets in FwithX. It is clear that Fsatises conditions Fand FX. . Proposition .. The partial cubes induced by a wgfamily Fand its retraction Fare isomorphic. Proof. It suces to prove that metric spaces FandFare isometric. Clearly PmapstoPXis a mapping from FontoF. ForPQF we have PXQX PQX PQF F PQ. ThusdPQ dPQ. Consequently is an isometry. LetGbe a partial cube on some set Xinduced by a wgfamily Fsatisfying conditions . and let PQbe an edge of G. By denition there is xXsuch thatPQx. The following two lemmas are instrumental. Lemma .. LetPQbe an edge of a partial cube GonXand letPQx. The two sets RFxRand RFx R form the same bipartition of the family Fas semicubes WPQandWQP. Proof. We may assume that QPx. Then for any RF RQRPx braceleftBigg RP xifxR RP ifx R. Hence RPRQif and only if xR. It follows that WPQRFxR. A similar argument shows that WQPRFx R. Lemma .. IfFis a wgfamily of sets satisfying conditions . then for anyxXthere are sets PQFsuch thatPQx. Proof. By conditions . for a given xXthere are sets SandTinFsuch thatxSandx T. LetRSR...R nTbe a sequence of sets in Fsatisfying conditions .. It is clear that there is isuch thatxRiand x Ri. HenceRiRix so we can choose PRiandQRi. By Lemmas . and . there is onetoone correspondence be tween the set Xand the quotientset E. From Theorem . we obtain the following result. Theorem .. LetFbe a wgfamily of nite subsets of a set Xsuch that FandFX and letGbe a partial cube on Xinduced by F. Then dimIG X. Clearly a graph which is isometrically embeddable into a pa rtial cube is a partial cube itself. We will show in Section Corollary . that the integer lattice Znis a partial cube. Thus a graph which is isometrically embedd able into an integer lattice is a partial cube. It follows that a n ite graph is a partial cube if and only if it is embeddable in some integer lattice. E xamples of innite partial cubes isometrically embeddable into a nite dimens ional integer lattice are found in . We call the minimum possible dimension nof an integer lattice Zn in which a given graph Gis isometrically embeddable its lattice dimension and denote it dim ZG. The lattice dimension of a partial cube can be expressed in terms of maximum matchings in socalled semicube graphs . Denition .. Thesemicube graph ScG has all semicubes in Gas the set of its vertices. Two vertices WabandWcdare connected in Sc G if WabWcdVandWabWcdatioslash. . IfGis a partial cube then condition . is equivalent to each of the two equivalent conditions WbaWcdWdcWab . where stands for the proper inclusion. Theorem .. Theorem in . LetGbe a nite partial cube. Then dimZG dim IG M whereMis a maximum matching in the semicube graph ScG. Example .. LetGbe the graph shown in Figure .. It is easy to see that dimIG and dim ZG . Example .. LetTbe a tree with nedges andmleaves. Then dimIT nand dim ZT m cf. and respectively. Example .. For the cycle Cwe have see Figure . dimIC dim ZC . Subcubes and Cartesian products LetGbe a partial cube. We say that Gis asubcube ofGif it is an isometric subgraph of G. Clearly a subcube is itself a partial cube. The converse doe s not hold a subgraph of a graph Gcan be a partial cube but not an isometric subgraph of Gcf. Example .. IfGis a subcube of a partial cube G then dim IGdimIG and dimZGdimZG. In general the two inequalities are not strict. For instance the cycle Cis an isometric subgraph of the cube Qsee Figure . and dimIC dim ZC dim IQ dim ZQ . Semicubes of a partial cube are examples of subcubes. Indeed by Theo rem . semicubes are convex subgraphs and therefore isome tric. In general the converse is not true a path connecting two opposite vert ices inCis an isometric subgraph but not a convex one. Another common way of constructing new partial cubes from ol d ones is by forming their Cartesian products see for details and p roofs. Denition .. Given two graphs G VE andG VE their Cartesian product GGsquareG has vertex set VVV a vertex u uu is adjacent to a vertex v vv if and only if uvEanduv oruvanduvE. The operation squareis associative so we can write GGsquare squareGnnproductdisplay iGi for the Cartesian product of graphs G...G n. A Cartesian productproducttextn iGi is connected if and only if the factors are connected. Then we have dGuv nsummationdisplay idGiuivi. . Example .. LetXin ibe a family of sets and Ysummationtextn ibe their sum. Then the Cartesian product of the hypercubes HXi is isomorphic to the hy percube HY. The isomorphism is established by the mapping f P...P nmapstonsummationdisplay iPi. Formula . yields immediately the following results. Proposition .. LetHibe isometric subgraphs of graphs Gifor all in. Then the Cartesian productproducttextn iHiis an isometric subgraph of the Cartesian productproducttextn iGi. Corollary .. The Cartesian product of a nite family of partial cubes is a partial cube. In particular the integer lattice Zncf. Examples . and . is a partial cube. The results of the next two theorems can be easily extended to arbitrary nite products of nite partial cubes. Theorem .. LetGGsquareGbe the Cartesian product of two nite partial cubes. Then dimIG dim IG dim IG. Proof. We may assume that Gresp.G is induced by a wgfamily Fresp. F of subsets of a nite set Xresp.X such that FandFX resp. FandFX see Section . By Theorem . dimIG Xand dim IG X. It is clear that the graph Gis induced by the wgfamily FFFof subsets of the setXXXcf. Example . with FFX. By Theorem . dimIG XXX dim IG dim IG. Theorem .. LetG VEbe the Cartesian product of two nite partial cubesG VEandG VE. Then dimZG dim ZG dim ZG. Proof. LetWabcdbe a semicube of the graph G. There are two possible cases ica bd E. Let xy be a vertex of G. Then by . dGxyab dGxa dGyb and dGxycd dGxc dGyd. Hence dGxyabdGxycddGybdGyd. It follows that WabcdVWbd. . iidb acE. Like in i we have WabcdWacV. . Clearly two semicubes given by . form an edge in the semi cube graph ScG if and only if their second factors form an edge in the semicu be graph ScG. The same is true for semicubes in the form . with respec t to their rst factors. It is also clear that semicubes in the form . and in the form . are not connected by an edge in Sc G. Therefore the semicube graph Sc G is isomorphic to the disjoint union of semicube graphs Sc G and ScG. IfM is a maximum matching in Sc G andMis a maximum matching in Sc G thenMMMis a maximum matching in Sc G. The result follows from theorems . and .. Remark .. The result of Corollary . does not hold for innite Cartesi an products of partial cubes as these products are disconnect ed. On the other hand it can be shown that arbitrary weakCartesian products connected com ponents of Cartesian products of partial cubes are par tial cubes. Pasting partial cubes In this section we use the set pasting technique ch.I . to build new partial cubes from old ones. LetG VE andG VE be two graphs H UF and H UF be two isomorphic subgraphs of GandG respectively and UUbe a bijection dening an isomorphism between HandH. The bijectiondenes an equivalence relation Ron the sum VVas follows any element in VUVU is equivalent to itself only and elements uU anduUare equivalent if and only if uu. We say that the quotient setV VVRis obtained by pasting together the sets VandValong the subsets UandU. Since the graphs HandHare isomorphic the pasting of the sets VandVcan be naturally extended to a pasting of sets of edges EandEresulting in the set Eof edges joining vertices in V. We say that the graphG EV is obtained by pasting together the graphs GandG along the isomorphic subgraphs HandH. The pasting construction allows for identifying in a natural way the graphs GandGwith subgraphs of G and the isomorphic graphs HandHwith a common subgraph Hof both graphs GandG. We often follow this convention below. Remark .. Note that in the above construction the resulting graph Gde pends not only on graphs GandGand their isomorphic subgraphs Hand Hbut also on the bijection dening an isomorphism from HontoHsee the drawings in Figures . and .. Figure . Pasting of two trees. Figure . Another pasting of the same trees. In general pasting of two partial cubes GandGalong two isomorphic subgraphsHandHdoes not produce a partial cube even under strong as sumptions about these subgraphs as the next example illustr ates. Figure . Pasting partial cubes GandG. Example .. Pasting of two partial cubes GCandGCalong subgraphsHandHis shown in Figure .. The resulting graph Gis not a partial cube. Indeed the semicube Wabis not a convex set. Note that subgraphs HandHare convex subgraphs of the respective partial cubes. In this section we study two simple pastings of connected gra phs together the vertexpasting and the edgepasting and show that thes e pastings produce partial cubes from partial cubes. We also compute the isomet ric and lattice dimensions of the resulting graphs. LetG VE andG VE be two connected graphs aV aV andH a H a. LetGbe the graph obtained by pasting GandGalong subgraphs HandH. In this case we say that the graphGis obtained from graphs GandGbyvertexpasting . We also say thatGis obtained from GandGbyidentifying verticesaanda. Figure . illustrates this construction. Note that the vertex aaais a cut vertex ofG sinceGGGandGGa. We follow our convention and identify graphs GandGwith subgraphs of G. Figure . An example of vertexpasting. In what follows we use superscripts to distinguish subgraph s of the graphs GandG. For instance W abstands for the semicube of Gdened by two adjacent vertices abV. Theorem .. A graphG VEobtained by vertexpasting from partial cubesG VEandG VEis a partial cube. Proof. We denote aaathe vertex of Gobtained by identifying vertices aVandaV. ClearlyGis a bipartite graph. Let xybe an edge of G. Without loss of generality we may assume that xyEandaWxy. Note that any path between vertices in VandVmust go through a. SinceaWxy we have for any vV dvx dva daxdva day dvy which implies VWxyandWyxV. It follows that WxyW xyVand WyxW yx. The sets W xy W yxandVare convex subsets of V. Since W xyVa the setWxyW xyVis also convex. By Theorem .ii the graphGis a partial cube. The vertexpasting construction introduced above can be ge neralized as follows. Let GGi ViEiiJbe a family of connected graphs and AaiGiiJbe a family of distinguished vertices of these graphs. Let G be the graph obtained from the graphs Giby identifying vertices in the set A. We say that Gis obtained by vertexpasting together the graphs Gialong the setA. Example .. LetJ...n withn GGi aibiaibiiJand AaiiJ. Clearly each GiisK. By vertexpasting these graphs along A we obtain the nstar graph Kn. Since the star Knis a tree it can be also obtained from Kby successive vertexpasting as in Example .. Example .. LetGbe a tree and GK. By vertexpasting these graphs we obtain a new tree. Conversely let Gbe a tree and vbe its leaf. Let Gbe a tree obtained from Gby deleting the leaf v. ClearlyGcan be obtained by vertexpasting GandK. It follows that any tree can obtained from the graph Kby successive vertexpasting of copies of Kcf. Theorem .e in . Any connected graph Gcan be constructed by successive vertexpasting of its blocks using its block cutvertex tree structure. Let Gbe an endblock of Gwith a cut vertex vandGbe the union of the remaining blocks of G. Then Gcan be obtained from GandGby vertexpasting along the vertex v. It follows that any connected graph can be obtained from its blo cks by successive vertexpastings. LetG VE be a partial cube. We recall that the isometric dimension dimIG ofGis the cardinality of the quotient set E whereis Djokovi cs equivalence relation on the set Ecf. formula .. Theorem .. LetG VEbe a partial cube obtained by vertexpasting together partial cubes G VEandG VE. Then dimIG dim IG dim IG. Proof. It suces to prove that there are no edges xyEanduvEwhich are in Djokovi cs relation with each other. Suppose that GandGare vertexpasted along vertices aEandaEand letaaa E. Let xyEanduvEbe two edges in E. We may assume that uWxy. Since ais a cutvertex of GanduWxy we have dua dax duxduy dua day. Hencedaxday which implies dvx dva daxdva day dvy. It follows that vWxy. Therefore the edge xydoes not stand in the relation to the vertex uv. The next result follows immediately from the previous theor em. Note that blocks of a partial cube are partial cubes themselves. Corollary .. LetGbe a partial cube and G...G nbe the family of its blocks. Then dimIG nsummationdisplay idimIGi. In the case of the lattice dimension of a partial cube we can cl aim only much weaker result than one stated in Theorem . for the isometri c dimension. We omit the proof. Theorem .. LetGbe a partial cube obtained by vertexpasting together parti al cubesGandG. Then maxdimZGdimZG dimZGdimZG dim ZG. The following example illustrate possible cases for inequa lities in Theo rem .. Let us recall that the lattice dimension of a tree wit hmleaves is mcf. . Example .. The starKcan be obtained from the stars KandKby vertexpasting these two stars along their centers. Clearl y maxdimZKdimZKdimZK dim ZK dim ZK. The same star Kis obtained from two copies of the star Kby vertex pasting along their centers. We have dim ZK dimZK so maxdimZKdimZKdimZKdimZK dim ZK. Let us vertexpaste two stars Kalong their two leaves. The resulting graphTis a tree with four vertices. Therefore maxdimZKdimZK dim ZTdimZK dim ZK. We now consider another simple way of pasting two graphs toge ther. LetG VE andG VE be two connected graphs abE abE andH abab H abab. LetGbe the graph obtained by pasting GandGalong subgraphs HandH. In this case we say that the graph Gis obtained from graphs GandGbyedgepasting . Figures . . and . illustrate this construction. Figure . An example of edgepasting. As before we identify the graphs GandGwith subgraphs of the graph Gand denote aaa bbbthe two vertices obtained by pasting together vertices aandaand respectively bandb. The edge abEis obtained by pasting together edges abEandabEcf. Figure .. ThenGGG VVabandEEab. We use these notations in the rest of this section. Proposition .. A graphGobtained by edgepasting together bipartite graphs GandGis bipartite. Proof. LetCbe a cycle in G. IfCGorCG then the length of Cis even since the graphs GandGare bipartite. Otherwise the vertices aand bseparateCinto two paths each of odd length. Therefore Cis a cycle of even length. The result follows. The following lemma is instrumental it describes the semic ubes of the graph Gin terms of semicubes of graphs GandG. Lemma .. Letuvbe an edge of G. Then iForuvE ab WuvWuvW uvV WvuW vu. iiForuvE ab WuvWuvW uvV WvuW vu. iiiaWuvbWvuWuvWab. Figure . Edgepasting of graphs GandG. Proof. We prove parts i and iii see Figure .. i Since any path from wVtouorvcontainsaorbandabWuv we havewWuv. HenceWuvW uvVandWvuW vu. iii Sinceabuv inG we haveW uvW ab by Theorem .iv. Let w be a vertex in W uv. Then by the triangle inequality dwudwvdwb dbvdwb dbu. Since any shortest path from wtoucontainsaorb we have dwa dau dwu. Therefore dwa daudwb dbu. Sinceabuv inG we havedau dbv by Theorem .. It follows that dwa dwb that is wW ab. We proved that W uvW ab. By symmetry W vuW ba. Since two opposite semicubes form a partition of V we haveW uvW ab. The result follows. Theorem .. A graphGobtained by edgepasting together partial cubes G andGis a partial cube. Proof. By Theorem .ii and Proposition . we need to show that f or any edgeuvofGthe semicube Wuvis a convex subset of V. There are two possible cases. iuvab. The semicube Wabis the union of semicubes W abandW ab which are convex subsets of VandV respectively. It is clear that any shortest path connecting a vertex in W abwith a vertex in W abcontains vertex aand therefore is contained in Wab. HenceWabis a convex set. A similar argument proves that the set Wbais convex. iiuvatioslashab. We may assume that uvE. To prove that the semicube Wuvis a convex set we consider two cases. aabWuv. The case when abWvuis treated similarly. By Lemma .i the semicube Wuvis the union of the semicube W uvand the setVwhich are both convex sets. Any shortest path Pfrom a vertex in Vto a vertex in W uvcontains either aorb. It follows that PW uvVWuv. Therefore the semicube Wuvis convex. baWuvbWvu. The case when bWuvaWvuis treated similarly. By Lemma .ii WuvWab. The result follows from part i of the proof. Theorem .. LetGbe a graph obtained by edgepasting together nite partial cubesGandG. Then dimIG dim IG dim IG. Proof. Let andbe Djokovi cs relations on EE andE respectively. By Lemma . for uvxy Eresp.uvxy E we have uvxy uvxyresp.uvxy uvxy. LetuvExyE anduvxy . Suppose that uvab . We may assume that abWuv. By Lemma .i VWuv a contradiction since xyE. Henceuvxyab . It follows that each equivalence class of the relationis either an equivalence class of an equivalence class of or the class containing the edge ab. Therefore EEE . The result follows since the isometric dimension of a parti al cube is equal to the cardinality of the set of equivalence classes of Djokovi c s relation formula .. We need some results about semicube graphs in order to prove a n analog of Theorem . for a partial cube obtained by edgepasting of tw o partial cubes. Lemma .. LetGbe a partial cube and WpqWuv W qpWxybe two edges in the graph Sc G. ThenWxyWuvis an edge in Sc G. Proof. By condition . WqpWuvandWyxWqp. HenceWyxWuv. By the same condition WxyWuvScG. As before we identify partial cubes GandGwith subgraphs of the partial cubeG. ThenGGGandGG abab Kcf. Figure .. Lemma .. LetGbe a partial cube obtained by edgepasting together partial cubesGandG. LetW uvW xyresp.W uvW xybe an edge in the semicube ScG resp. Sc G. ThenWuvWxyis an edge in Sc G. Figure . Semicubes forming an edge in Sc G. Proof. It suces to consider the case of Sc G see Figure .. By condi tion .W vuW xyandW yxW uv. Suppose that aW vuandbW yx the case when bW vuandaW yxis treated similarly. Then abxyand abuv. By transitivity of we haveuvxy a contradiction since semicubes W uvandW xyare distinct. Therefore we may assume that say abW uv. Then by Lemma . WvuW vuV. SinceW vuW xyWxy we have WvuWxy. By condition . WuvWxyis an edge in Sc G. Lemma .. LetMandMbe matchings in graphs Sc Gand Sc G. There is a matching Min ScGsuch that M MM . Proof. By Lemma . MandMinduce matchings in Sc G which we denote by the same symbols. The intersection MMis either empty or a subgraph of the empty graph with vertices WabandWba. IfMMis empty then MMMis a matching in Sc G and the result follows. IfMMis an empty graph with a single vertex say in M we remove fromMthe edge that has this vertex as its end vertex resulting in t he matching M . ClearlyMM Mis a matching in Sc G and MMM . Suppose now that MMis the empty graph with vertices WabandWba. LetWabWuv W baWpqresp.WabWxy WbaWrs be edges in Mresp.M. By Lemma . WxyWrsis an edge in Sc G. Let us replace edges WabWxyand WbaWrsinMby a single edge WxyWrs resulting in the matching M . Then MMM is a matching in Sc G and MMM . Corollary .. LetMandMbe maximum matchings in Sc Gand Sc G respectively and Mbe a maximum matching in Sc G. Then M MM . . By Theorem . we have dimIG dim ZG MdimIG dim ZG M and dimIG dim ZG M whereMandMare maximum matchings in Sc G and ScG respectively andMis a maximum matching in Sc G. Therefore by Theorem . and . we have the following result cf. Theorem .. Theorem .. LetGbe a partial cube obtained by edgepasting from partial cubesGandG. Then maxdimZGdimZG dimZGdimZG dim ZG. Example .. Let us consider two edgepastings of the stars GKand GKof lattice dimension shown in gures . and .. In the rst case the resulting graph is the star GKof lattice dimension . Then we have maxdimZGdimZGdimZGdimZG dim ZG. In the second case the resulting graph is a tree with leaves. Therefore maxdimZGdimZG dim ZGdimZG dim ZG. Letcaandcabe edges of stars GKandGKeach of which has lattice dimension where candcare centers of the respective stars. Let us edgepaste these two graphs by identifying cwithcandawith a respectively. The resulting graph Gis the starKof lattice dimension . Thus maxdimZGdimZG dimZG dim ZG dim ZG. Expansions and contractions of partial cubes The graph expansion procedure was introduced by Mulder in where it is shown that a graph is a median graph if and only if it can be obta ined from Kby a sequence of convex expansions see also . A similar result for partial cubes was established in see also as a corol lary to a more general result concerning isometric embeddability into Hamming gr aphs it was also established in in the framework of oriented matroids th eory. In this section we investigate properties of isometric ex pansion and con traction operations and in particular prove in two diere nt ways that a graph is a partial cube if and only if it can be obtained from the graph Kby a sequence of expansions. A remark about notations is in order. In the product VV we denoteV ii Viandxi ix forxVi whereij . Denition .. LetG VE be a connected graph and let G VE andG VE be two isometric subgraphs of Gsuch thatGGG. Theexpansion of Gwith respect to GandGis the graph G VE constructed as follows from Gsee Figure . iVVVV V iiEEEM whereMis the matchinguniontext xVVxx. In this case we also say that Gis acontraction ofG. Figure . Expansioncontraction processes. It is clear that the graphs GandabracktltV abracktrihtare isomorphic as well as the graphs GandabracktltV abracktriht. We dene a projectionpVVbypxi xforxV. Clearly the restriction of ptoV is a bijection pV Vand its restriction to V is a bijectionpV V. These bijections dene isomorphisms abracktltV abracktriht Gand abracktltV abracktriht G. LetPbe a path in G. The vertices of Gobtained from the vertices in P under the projection pdene a walk PinG we call this walk Ptheprojection of the path P. It is clear that P PifP abracktltV abracktrihtorP abracktltV abracktriht. . In this case Pis a path in Gand either PpP orPpP. On the other hand PPifP abracktltV abracktriht atioslashandP abracktltV abracktriht atioslash . andPis not necessarily a path. We will frequently use the results of the following lemma in t his section. Lemma .. iForuvV any shortest path PuvinGbelongs to abracktltV abracktriht and its projection PuvpPuvis a shortest path in G. Accordingly dGuv dGuv andabracktltV abracktrihtis a convex subgraph of G. A similar statement holds for uvV . iiForuV andvV dGuv dGuv . LetPuvbe a shortest path in G. There is a unique edge xxMsuch that xxPuvand the sections PuxandPxvof the path Puvare shortest paths in abracktltV abracktrihtandabracktltV abracktriht respectively. The projection PuvofPuvinGis a shortest path in G. Proof. i LetPuvbe a path in Gthat intersects V . Since abracktltVabracktrihtis an isometric subgraph of G there is a path PuvinGthat belongs to abracktltVabracktriht. Thenp Puv is a path in abracktltV abracktrihtof the same length as Puv. By . and . p PuvPuv. Therefore any shortest path PuvinGbelongs to abracktltV abracktriht. The result follows. ii LetPuvbe a shortest path in GandPuvbe its projection to V. By . dGuv PuvPuvdGuv. Since there is no edge of Gjoining vertices in VVandVV a shortest path inGfromutovmust contain a vertex xVV. SinceGandG are isometric subgraphs there are shortest paths PuxinGandPxvinGsuch that their union is a shortest path from utov. Then by the triangle inequality and part i of the proof we have cf. Figure . dGuvdGux dGxx dGxv dGuv . The last two displayed formulas imply dGuv dGuv . SinceuV andvV the pathPuvmust contain an edge say xx in M. Since this path is a shortest path in G this edge is unique. Then the sec tionsPuxandPxvofPuvare shortest paths in abracktltV abracktrihtandabracktltV abracktriht respectively. ClearlyPuvis a shortest path in G. Letaabe an edge in the matching MxVVxx. This edge denes ve fundamental sets cf. Section the semicubes WaaandWaa the sets of vertices UaaandUaa and the set of edges Faa. The next theorem follows immediately from Lemma .. It gives a hint to a conne ction between the expansion process and partial cubes. Theorem .. LetGbe an expansion of a connected graph Gand notations are chosen as above. Then iWaaV andWaaV are convex semicubes of G. iiFaaMdenes an isomorphism between induced subgraphs abracktltUaaabracktrihtand abracktltUaaabracktriht which are isomorphic to the subgraph GG. The result of Theorem . justies the following constructi ve denition of the contraction process. Denition .. Letabbe an edge of a connected graph G VE such that i semicubes WabandWbaare convex and form a partition of V ii the set Fabis a matching and denes an isomorphism between subgraphs abracktltUababracktrihtandabracktltUbaabracktriht. A graphGobtained from the graphs abracktltWababracktrihtandabracktltWbaabracktrihtby pasting them along subgraphs abracktltUababracktrihtandabracktltUbaabracktrihtis said to be a contraction of the graph G. Remark .. IfGis bipartite then semicubes WabandWbaform a partition of its vertex set. Then by Theorem . condition i implies c ondition ii. Thus any pair of opposite convex semicubes in a connected biparti te graph denes a contraction of this graph. By Theorem . a graph is a contraction of its expansion. It i s not dicult to see that any connected graph is also an expansion of its con traction. The following three examples give geometric illustrations for the expansion and contraction procedures. Example .. Letaandbbe two opposite vertices in the graph GC. Clearly the two distinct paths PandPfromatobare isometric subgraphs ofGdening an expansion GCofGsee Figure .. Note that PandP are not convex subsets of V. Example .. Another isometric expansion of the graph GCis shown in Figure .. Here the path Pis the same as in the previous example and GG. Example .. Lemma . claims in particular that the projection of a sho rtest path in an extension Gof a graphGis a shortest path in G. Generally speaking Figure . An expansion of the cycle C. Figure . Another isometric expansion of the cycle C. the converse is not true. Consider the graph Gshown in Figure . and two paths inG Vabcef andVbde. The graphGin Figure . is the convex expansion of Gwith respect to Vand V. The path abdef is a shortest path in G it is not a projection of a shortest path inG. Figure . A shortest path which is not a projection of a shor test path. One can say that in the case of nite partial cubes the contr action procedure is dened by an orthogonal projection of a hypercube onto one of its facets. By Theorem . the sets V andV are opposite semicubes of the graph G dened by edges in M. Their projections are the sets VandVwhich are not necessarily semicubes of G. For other semicubes in Gwe have the following result. Lemma .. For any two adjacent vertices uvV WuivipWuvforuvViandi . Proof. By Lemma . dGxjuidGxjvidGxudGxv forxVandij . The result follows. Corollary .. Ifuvis an edge of GG thenWuvWuv. The following lemma is an immediate consequence of Lemma . . We shall use it implicitly in our arguments later. Lemma .. LetuvVandxVV. Then xWuvxWuv. The same result holds for semicubes in the form Wuv. Generally speaking the projection of a convex subgraph of Gis not a con vex subgraph of G. For instance the projection of the convex path bdein Figure . is the path bdewhich is not a convex subgraph of G. On the other hand we have the following result. Theorem .. LetG VEbe an expansion of a graph G VEwith respect to subgraphs G VEandG VE. The projection of a convex semicube of Gdierent from abracktltV abracktrihtandabracktltV abracktrihtis a convex semicube of G. Proof. It suces to consider the case when WuvpWuv foruvVcf. Theorem .. Let xyWuvandzVbe a vertex such that dGxz dGzy dGxy. We need to show that zWuv. Figure . A shortest path from xtoy. ixyVthe case when xyVis treated similarly. Suppose that zV. ThenxyzV and by Lemma . dGxz dGzy dGzy. SincexyWuvandWuvis convexzWuv. HencezWuv. Suppose now that zVV. Consider a shortest path PxyinGfromx toycontaining z. This path contains vertices xyVVsuch that see Figure . dGxx dGxz dGxz anddGyy dGyz dGyz. SincePxyis a shortest path in G we have dGxx dGxy dGxy d Gxy dGyy dGxy and dGxz dGzy dGxy. SincexxyV we havexxyV . BecausexyWuvandWuv is convexxWuv. HencexWuvand similarly yWuv. Since xyzV andWuvis convexzWuv. HencezWuv. iixVVandyVV. We may assume that zV. By Lemma . dGxy dGxy dGxz dGzy dGxz dGzy. SincexyWuvandWuvis convexzWuv. HencezWuv. By using the results of Lemma . it is not dicult to show tha t the class of connected bipartite graphs is closed under the expansion and contraction operations. The next theorem establishes this result for th e class of partial cubes. Theorem .. iAn expansion Gof a partial cube Gis a partial cube. iiA contraction Gof a partial cube Gis a partial cube. Proof. i LetG VE be a partial cube and G VE be its expansion with respect to isometric subgraphs G VE andG VE. By Theorem .ii it suces to show that the semicubes of Gare convex. By Lemma . the semicubes abracktltV abracktrihtandabracktltV abracktrihtare convex so we consider a semicube in the form WuvwhereuvEthe other case is treated similarly. LetPxybe a shortest path connecting two vertices in WuvandPxybe its projection to G. By Theorem . xyWuvand by Lemma . Pxyis a shortest path in G. SinceWuvis convexPxybelongs to Wuv. Letzbe a vertex inPxyandzpzPxy. By Lemma . dGzudGzvdGzudGzv. SinceGis a bipartite graph dGzu dGzv. HencePxyWuv soWuvis convex. ii LetG VE be a contraction of a partial cube G VE. By Theorem . we need to show that the semicubes of Gare convex. By The orem . all semicubes of Gare projections of semicubes of Gdistinct from abracktltV abracktrihtandabracktltV abracktriht. By Theorem . the semicubes of Gare convex. Corollary .. iA nite connected graph is a partial cube if and only if it can be obtained from Kby a sequence of expansions. iiThe number of expansions needed to produce a partial cube GfromK isdimIG. Proof. i Follows immediately from Theorem .. ii Follows from theorems . and . see the discussion in Section just before Theorem . . The processes of expansion and contraction admit useful des criptions in the case of partial cubes on a set. Let G VE be a partial cube on a set X that is an isometric subgraph of the hypercube HX. Then it is induced by some wgfamily Fof nite subsets of Xcf. Theorem .. We may assume see Section that FandFX. In what follows we present proofs of the results of Theorem . and Corol lary . given in terms of wgfamilies of sets. The expansion process for a partial cube GonXcan be described as follows LetFandFbe wgfamilies of nite subsets of Xsuch that FFatioslash FFF and the distance between any two sets PFFandQFF is greater than one. Note that abracktltFabracktrihtandabracktltFabracktrihtare partial cubes abracktltFabracktrihtabracktltFabracktriht atioslash andabracktltFabracktriht abracktltFabracktrihtabracktltFabracktrihtG. LetXXp wherep X and F QpQFFFF . It is quite clear that the graphs abracktltF abracktrihtandabracktltFabracktrihtare isomorphic and the graph GabracktltFabracktrihtis an isometric expansion of the graph G. Theorem .. An expansion of a partial cube is a partial cube. Proof. We need to verify that Fis a wgfamily of nite subsets of X. By Theorem . it suces to show that the distance between any t wo adjacent sets in Fis . It is obvious if each of these two sets belong to one of the families ForF . Suppose that PFandQp F are adjacent that is for any SFwe have PQpSPQpSPorSQp.. IfQF then PQpQPQp sincep P. By . QPimplyingdPQp . IfQFF there isRFFsuch that dPR dRQ dPQ sinceFis well graded. By Theorem . PQRPQ which implies PQpRp PQp. By .RpQp a contradiction. It is easy to recognize the fundamental sets cf. Section i n an isometric expansionGof a partial cube GabracktltFabracktriht. LetPFFandQPp F be two vertices dening an edge in Gaccording to Denition .ii. Clearly the families FandF are the semicubes WPQandWQPof the graph Gcf. Lemma . and therefore are convex subsets of F. The setFPQis the set of edges dened by pas in Lemma .. In addition UPQFFand UQPRpRFF. LetGbe a partial cube induced by a wgfamily Fof nite subsets of a set X. As before we assume that FandFX. LetPQbe an edge of G. We may assume that QPpfor somep P. Then see Lemma . WPQRFp RandWQPRFpR. LetXX pandFR pRF. It is clear that the graph G induced by the family Fis isomorphic to the contraction of Gdened by the edgePQ. Geometrically the graph Gis the orthogonal projection of the graph Galong the edge PQcf. gures . and .. Theorem .. iA contraction Gof a partial cube Gis a partial cube. iiIfGis nite then dimIG dim IG. Proof. i ForpXwe dene FRFp RFRFpR andF R p FpR. Note that FandFare semicubes of G andF is isometric to F. Hence FandF are wgfamilies of nite subsets ofX. We need to prove that FFF is a wgfamily. By Theorem . it suces to show that dPQ for any two adjacent sets PQF. This is true ifPQForPQF since these two families are well graded. For PFF andQF F the setsPandQpare not adjacent in F sinceFis well graded and Q F. Hence there is RFsuch that PQpRPQp andRatioslashP. Sincep R we have PQRPQ. SinceRatioslashPandRatioslashQ the setsPandQare not adjacent in F. The result follows. ii IfGis a nite partial cube then by Theorem . dimIG XX dim IG. Conclusion The paper focuses on two themes of a rather general mathemati cal nature. .The characterization problem. It is a common practice in mathematics to characterize a particular class of object in dierent ter ms. We present new characterizations of the classes of bipartite graphs and pa rtial cubes and give new proofs for known characterization results. .Constructions. The problem of constructing new objects from old ones is a standard topic in many branches of mathematics. For the c lass of partial cubes we discuss operations of forming the Cartesian produ ct expansion and contraction and pasting. It is shown that the class of parti al cubes is closed under these operations. Because partial cubes are dened as graphs isometrically em beddable into hypercubes the theory of partial cubes has a distinctive ge ometric avor. The three main structures on a graphsemicubes and Djokovi cs and Winklers relationsare dened in terms of the metric structure on a gr aph. One can say that this theory is a branch of discrete metric geometry. Not surprisingly geo metric structures play an important role in our treatment of the characterization and construction problems. 